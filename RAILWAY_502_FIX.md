# ğŸ”§ Railway 502 é”™è¯¯ä¿®å¤æŒ‡å—

## é—®é¢˜ï¼š502 Bad Gateway

502 é”™è¯¯é€šå¸¸è¡¨ç¤ºåº”ç”¨æ²¡æœ‰æ­£ç¡®å¯åŠ¨æˆ–ç«¯å£é…ç½®é”™è¯¯ã€‚

---

## âœ… å·²åº”ç”¨çš„ä¿®å¤

1. **ç«¯å£é…ç½®**
   - âœ… ä½¿ç”¨ `$PORT` ç¯å¢ƒå˜é‡ï¼ˆRailway è‡ªåŠ¨æä¾›ï¼‰
   - âœ… æ·»åŠ  `--server.headless=true` å‚æ•°

2. **å¯åŠ¨å‘½ä»¤ä¼˜åŒ–**
   - âœ… æ·»åŠ  CORS å’Œ XSRF ä¿æŠ¤é…ç½®
   - âœ… ç¡®ä¿ Streamlit åœ¨æœåŠ¡å™¨ç¯å¢ƒä¸­æ­£å¸¸è¿è¡Œ

3. **Dockerfile ä¿®å¤**
   - âœ… ä½¿ç”¨æ­£ç¡®çš„ CMD æ ¼å¼
   - âœ… Railway çš„ startCommand ä¼šè¦†ç›– Dockerfile çš„ CMD

---

## ğŸ” è¯Šæ–­æ­¥éª¤

### 1. æŸ¥çœ‹ Railway éƒ¨ç½²æ—¥å¿—

åœ¨ Railway Dashboardï¼š
1. è¿›å…¥ä½ çš„é¡¹ç›®
2. ç‚¹å‡» "Deployments" æ ‡ç­¾
3. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²
4. æŸ¥çœ‹ "Logs"

**æŸ¥æ‰¾ä»¥ä¸‹ä¿¡æ¯**ï¼š
- âœ… åº”ç”¨æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼Ÿ
- âœ… æ˜¯å¦çœ‹åˆ° "You can now view your Streamlit app"ï¼Ÿ
- âœ… æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ï¼Ÿ

### 2. æ£€æŸ¥å¯åŠ¨å‘½ä»¤

åœ¨ Railway Dashboard â†’ Settings â†’ Deployï¼š
- ç¡®è®¤ "Start Command" è®¾ç½®ä¸ºï¼š
  ```
  streamlit run app.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false --server.enableXsrfProtection=false
  ```

### 3. æ£€æŸ¥ç«¯å£é…ç½®

åœ¨ Railway Dashboard â†’ Settings â†’ Variablesï¼š
- ç¡®è®¤ `PORT` ç¯å¢ƒå˜é‡å­˜åœ¨ï¼ˆRailway è‡ªåŠ¨è®¾ç½®ï¼‰
- å¦‚æœæ²¡æœ‰ï¼Œæ‰‹åŠ¨æ·»åŠ ï¼š`PORT` = `8080`ï¼ˆæˆ– Railway åˆ†é…çš„ç«¯å£ï¼‰

---

## ğŸ› ï¸ æ‰‹åŠ¨ä¿®å¤æ­¥éª¤

å¦‚æœè‡ªåŠ¨éƒ¨ç½²åä»ç„¶ 502ï¼š

### æ–¹æ³•1ï¼šåœ¨ Railway ä¸­æ‰‹åŠ¨è®¾ç½®å¯åŠ¨å‘½ä»¤

1. Railway Dashboard â†’ ä½ çš„é¡¹ç›® â†’ Settings
2. æ‰¾åˆ° "Deploy" éƒ¨åˆ†
3. è®¾ç½® "Start Command"ï¼š
   ```
   streamlit run app.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true
   ```
4. ä¿å­˜å¹¶é‡æ–°éƒ¨ç½²

### æ–¹æ³•2ï¼šæ£€æŸ¥åº”ç”¨æ˜¯å¦å¯åŠ¨

æŸ¥çœ‹æ—¥å¿—ï¼Œå¦‚æœçœ‹åˆ°ï¼š
- âŒ "ModuleNotFoundError" â†’ ä¾èµ–æœªå®‰è£…
- âŒ "Address already in use" â†’ ç«¯å£å†²çª
- âŒ "Permission denied" â†’ æƒé™é—®é¢˜

---

## ğŸ“‹ å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆè¿˜æ˜¯ 502ï¼Ÿ
A: å¯èƒ½åŸå› ï¼š
1. åº”ç”¨å¯åŠ¨å¤±è´¥ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
2. ç«¯å£é…ç½®é”™è¯¯
3. Railway çš„ç½‘ç»œé—®é¢˜

### Q: å¦‚ä½•ç¡®è®¤åº”ç”¨å·²å¯åŠ¨ï¼Ÿ
A: æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰ï¼š
```
You can now view your Streamlit app in your browser.
Local URL: http://0.0.0.0:8080
```

### Q: åº”ç”¨å¯åŠ¨ä½†æ— æ³•è®¿é—®ï¼Ÿ
A: æ£€æŸ¥ï¼š
1. Railway æ˜¯å¦åˆ†é…äº†æ­£ç¡®çš„åŸŸå
2. ç«¯å£æ˜¯å¦æ­£ç¡®æ˜ å°„
3. é˜²ç«å¢™è®¾ç½®

---

## ğŸ†˜ å¦‚æœä»ç„¶å¤±è´¥

è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š
1. Railway éƒ¨ç½²æ—¥å¿—ï¼ˆç‰¹åˆ«æ˜¯é”™è¯¯éƒ¨åˆ†ï¼‰
2. Railway Settings ä¸­çš„ Start Command
3. ç¯å¢ƒå˜é‡åˆ—è¡¨

è¿™æ ·æˆ‘å¯ä»¥è¿›ä¸€æ­¥å¸®ä½ è¯Šæ–­é—®é¢˜ã€‚
